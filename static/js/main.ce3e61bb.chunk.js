(this["webpackJsonpthemoviedb-search-app"]=this["webpackJsonpthemoviedb-search-app"]||[]).push([[0],{11:function(e,t,a){e.exports={LoadedApp:"LoadedApp_LoadedApp__11f6q",error:"LoadedApp_error__2vWnV",SearchInput:"LoadedApp_SearchInput__1u9iq"}},35:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(14),i=a.n(s),o=(a(35),a(23)),j=a(13),u=a(28),d=a(10),l=a(2),p=a(19),b=a.n(p),h=a(24),v=a(25),O=a(26),m=function(){function e(){Object(v.a)(this,e)}return Object(O.a)(e,null,[{key:"getList",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new URLSearchParams({page:n.toString()});return fetch("https://api.themoviedb.org/4/list/".concat(a,"?").concat(r),e.requestOptions).then(x).then((function(e){return e.json()}))}}]),e}();function x(e){return f.apply(this,arguments)}function f(){return(f=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=6;break}return e.t0=Error,e.next=4,t.text();case 4:throw e.t1=e.sent,new e.t0(e.t1);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){if(void 0===e)return t;try{return parseInt(e,10)}catch(a){return t}}m.requestOptions={method:"GET",headers:new Headers({"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0ZDQ2MjY3YTNkYmIzYWE1ZDIyYjZkN2MzYjdhZDIxYiIsInN1YiI6IjVmYWM1ZTE0N2YwNTQwMDA0MTQ5ZTA3OSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.ZCn2ELOM-Bc-oJbMLxtIgraxKVVrJXDsK_NNtZMXh14")}),redirect:"follow"};var g=a(8),N=a.n(g),M=a(15),w=a(29);var I=a(11),C=a.n(I),L=a(7),A=a.n(L),y=a(16),J=a.n(y);function P(e){return Object(n.jsxs)("article",{className:A.a.MovieCard,"data-testid":"movie-card",children:[Object(n.jsx)("img",{className:A.a.poster,src:"https://image.tmdb.org/t/p/w500/".concat(e.movie.poster_path),alt:"Poster"}),Object(n.jsxs)("div",{className:A.a.info,children:[Object(n.jsx)("h2",{className:A.a.title,children:e.movie.title}),Object(n.jsx)("p",{className:A.a.overview,children:e.movie.overview})]})]})}function T(){return Object(n.jsxs)("article",{className:J()(A.a.MovieCard,A.a.skeleton),children:[Object(n.jsx)("div",{className:A.a.poster}),Object(n.jsxs)("div",{className:A.a.info,children:[Object(n.jsx)("p",{className:A.a.title}),Object(n.jsx)("p",{className:A.a.overview})]})]})}function B(e){var t=Object(r.useState)(""),a=Object(w.a)(t,2),c=a[0],s=a[1],i=function(e,t){var a=t.toLowerCase();return e.filter((function(e){return e.overview.toLowerCase().replace(/[^\w\d\s]/gm,"").includes(a)}))}(e.movies,c);return Object(n.jsxs)("div",{className:C.a.LoadedApp,children:[Object(n.jsx)("input",{type:"search",className:C.a.SearchInput,placeholder:"Search",value:c,onChange:function(e){return s(e.target.value)},"data-testid":"search-movies-input"}),i.map((function(e){return Object(n.jsx)(P,{movie:e},e.id)}))]})}function S(e){return Object(n.jsxs)("div",{className:J()(C.a.LoadedApp,Object(M.a)({},C.a.error,e.isError)),children:[Object(n.jsx)("input",{type:"search",className:C.a.SearchInput,disabled:!0,value:e.message}),Object(n.jsx)(T,{}),Object(n.jsx)(T,{}),Object(n.jsx)(T,{}),Object(n.jsx)(T,{})]})}var k=new j.a;function E(e){return Object(n.jsxs)(j.b,{queryCache:k,children:[Object(n.jsx)(d.a,{basename:"/themoviedb-search-app",children:Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.a,{exact:!0,from:"/",to:"/1"}),Object(n.jsx)(l.b,{path:"/:listId(\\d+)",render:function(){return Object(n.jsx)(Y,Object(o.a)({},e))}}),Object(n.jsx)(l.b,{component:D})]})}),Object(n.jsx)(u.ReactQueryDevtools,{})]})}function Y(e){var t,a=function(e){var t=_(Object(l.g)().listId,1),a=Object(j.c)(["movieList",t],e,{staleTime:3e5,cacheTime:1/0,getFetchMore:function(e){if(!(e.page>=e.total_pages))return e.page+1}});return Object(r.useEffect)((function(){a.canFetchMore&&!a.isFetchingMore&&a.fetchMore()}),[a]),a}(null!==(t=e.getMovieList)&&void 0!==t?t:m.getList);if(a.isLoading)return Object(n.jsx)(Z,{});if(a.isError)return Object(n.jsx)(Q,{});var c=a.data.flatMap((function(e){return e.results}));return Object(n.jsxs)("div",{className:N.a.App,children:[Object(n.jsx)(B,{movies:c}),Object(n.jsx)(F,{})]})}function Z(){return Object(n.jsxs)("div",{className:N.a.App,children:[Object(n.jsx)(S,{message:""}),Object(n.jsx)(F,{})]})}function Q(){return Object(n.jsxs)("div",{className:N.a.App,children:[Object(n.jsx)(S,{isError:!0,message:"Something went wrong"}),Object(n.jsx)(F,{})]})}function D(){return Object(n.jsxs)("div",{className:N.a.App,children:[Object(n.jsx)(S,{isError:!0,message:"Page Not Found"}),Object(n.jsx)(F,{})]})}function F(){var e=_(Object(l.g)().listId,1),t="/".concat(Math.max(1,Math.floor(1e4*Math.random()))),a="/".concat(e+1),r="/".concat(Math.max(1,e-1));return Object(n.jsxs)("div",{className:N.a.Panel,children:[Object(n.jsx)(d.b,{to:a,className:N.a.PanelButton,children:"+"}),Object(n.jsx)(d.b,{to:t,className:N.a.PanelButton,children:"?"}),Object(n.jsx)(d.b,{to:r,className:N.a.PanelButton,children:"-"})]})}var q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,43)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(E,{})}),document.getElementById("root")),q()},7:function(e,t,a){e.exports={MovieCard:"MovieCard_MovieCard__1QTdo",skeleton:"MovieCard_skeleton__17K88",poster:"MovieCard_poster__Q1BYT",title:"MovieCard_title__pu03D",overview:"MovieCard_overview__aVaLJ",info:"MovieCard_info__b2BHy"}},8:function(e,t,a){e.exports={App:"App_App__rq8wc",Panel:"App_Panel__1fvm-",PanelButton:"App_PanelButton__3ZevQ"}}},[[42,1,2]]]);
//# sourceMappingURL=main.ce3e61bb.chunk.js.map